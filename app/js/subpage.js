!function(){"use strict";Handlebars.registerHelper("times",function(e,t){var a=new Array(e+1),n=a.join(t);return n}),Handlebars.registerHelper("increase",function(e,t){return e+t}),Handlebars.registerHelper("scoreDescription",function(e){var t="";switch(!0){case 3>=e:t="Fatalny";break;case e>3&&5>=e:t="Nie najlepszy";break;case e>5&&6.4>e:t="Przeciętny";break;case e>5&&6.5>=e:t="Przeciętny";break;case e>6.5&&8>=e:t="Bardzo dobry";break;case e>8&&9>e:t="Znakomity";break;default:t="Wybitny"}return t+" "+e}),Handlebars.registerHelper("isEqual",function(e,t){return e===t})}(),function(){"use strict";var e,t,a;e={baseUrl:"//camp.efigence.com/camp/api/places?page=",getData:function(e){var t=this;return $.ajax({method:"GET",crossDomain:!0,url:t.baseUrl+e})}},a={totalPages:null,currentPage:1,maxNumberOfButtons:10,numberOfVisibleButtons:null,visiblePages:[],init:function(){var a=this;e.getData().done(function(e){a.totalPages=e.total_pages,a.numberOfVisibleButtons=Math.min(a.totalPages,a.maxNumberOfButtons);for(var n=0;n<a.numberOfVisibleButtons;n++)a.visiblePages.push(n+1);t.updateView({pageNumber:1,activeButtonIndex:0}),t.renderPagination(a.numberOfVisibleButtons),a.addListeners()})},updateVisiblePages:function(){var e,t=this.numberOfVisibleButtons,a=document.getElementsByClassName("pagination__button");if(this.visiblePages.indexOf(this.currentPage)>-1)return!1;e=this.visiblePages[0]>this.currentPage?Math.max(-this.currentPage,-t):Math.min(t,this.totalPages-this.currentPage+1);for(var n=0,s=t;s>n;n++)this.visiblePages[n]=this.visiblePages[n]+e,a[n].textContent=this.visiblePages[n],a[n].dataset.page=this.visiblePages[n]},updateStatus:function(e){var a,n;if(e.page&&e.offset||!e.page&&!e.offset)return!1;switch(a=e.page||this.currentPage+e.offset,!0){case a===this.currentPage:return!1;case a>this.totalPages:return!1;case 1>a:return!1;default:this.currentPage=a,this.updateVisiblePages(),n=this.visiblePages.indexOf(a),t.updateView({pageNumber:a,activeButtonIndex:n,totalPages:this.totalPages})}},addListeners:function(){var e=document.getElementById("pagination__buttons-list"),t=document.getElementsByClassName("buttons-next-prev__wrap")[0],a=document.getElementsByClassName("buttons-next-prev__wrap")[1],n=this;e.addEventListener("click",function(e){n.updateStatus({page:parseInt(e.target.dataset.page)})}),t.addEventListener("click",function(e){n.updateStatus({offset:-1})}),a.addEventListener("click",function(e){n.updateStatus({offset:1})})}},t={renderTemplate:function(e){var t=document.getElementById(e.templateId).textContent,a=Handlebars.compile(t),n=e.data,s=document.getElementById(e.targetId),i=a(n);s.innerHTML=i},renderOffersList:function(e){this.renderTemplate({templateId:"offers-template",data:e,targetId:"offers"})},renderOffersError:function(e){this.renderTemplate({templateId:"offers-template--error",data:e,targetId:"offers"})},renderPagination:function(e){var t,a;t=document.getElementsByClassName("buttons-next-prev__wrap"),a=Array.apply(null,new Array(e)).map(Number.prototype.valueOf,0);for(var n=0;2>n;n++)t[n].classList.remove("hidden");this.renderTemplate({templateId:"pagination-button",data:{buttonsCount:a},targetId:"pagination__buttons-list"})},updateView:function(t){var a=this;e.getData(t.pageNumber).done(function(e){a.renderOffersList(e),a.markActiveButton(t.activeButtonIndex),a.showHideNavButtons(t)}).error(function(e){a.renferOffersError(e)})},markActiveButton:function(e){for(var t="pagination__button--active",a=document.getElementsByClassName(t),n=document.getElementsByClassName("pagination__button"),s=0,i=a.length;i>s;s++)a[s].classList.remove(t);n[e].classList.add(t)},showHideNavButtons:function(e){var t=document.getElementsByClassName("buttons-next-prev__wrap"),a="buttons-next-prev__wrap--inactive",n=document.getElementsByClassName(a);if(e.pageNumber>1&&e.pageNumber<e.totalPages)for(var s=0,i=n.length;i>s;s++)n[s].classList.remove(a);else 1===e.pageNumber?t[0].classList.add(a):t[1].classList.add(a)}},a.init()}(),function(){var e=document.querySelector(".hamburger-button"),t=document.querySelector(".main-menu"),a="main-menu--collapsed",n="animated--scaleIn";animationCollapse="animated--scaleOut",animationDelay=300,e.addEventListener("click",function(){t.classList.contains(a)?(t.classList.toggle(a),t.classList.toggle(n)):(t.classList.toggle(n),t.classList.toggle(animationCollapse),setTimeout(function(){t.classList.toggle(a),t.classList.toggle(animationCollapse)},animationDelay)),e.classList.toggle("fa-bars"),e.classList.toggle("fa-times")})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZWJhcnMtaGVscGVycy5qcyIsIm1haW4tc3VicGFnZS5qcyIsInRvb2dsZS1tZW51LmpzIl0sIm5hbWVzIjpbIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsIm51bWJlciIsImVsZW1lbnQiLCJhcnIiLCJBcnJheSIsInJlc3VsdCIsImpvaW4iLCJ2YWx1ZSIsInN0ZXAiLCJzY29yZSIsImRlc2NyaXB0aW9uIiwicHJpY2VSZWd1bGFyIiwicHJpY2VQcm9tbyIsIm9mZmVyc0RhdGEiLCJvZmZlcnNWaWV3Iiwib2ZmZXJzU3RhdGUiLCJiYXNlVXJsIiwiZ2V0RGF0YSIsInBhZ2VOdW1iZXIiLCJ0aGF0IiwidGhpcyIsIiQiLCJhamF4IiwibWV0aG9kIiwiY3Jvc3NEb21haW4iLCJ1cmwiLCJ0b3RhbFBhZ2VzIiwiY3VycmVudFBhZ2UiLCJtYXhOdW1iZXJPZkJ1dHRvbnMiLCJudW1iZXJPZlZpc2libGVCdXR0b25zIiwidmlzaWJsZVBhZ2VzIiwiaW5pdCIsImRvbmUiLCJkYXRhIiwidG90YWxfcGFnZXMiLCJNYXRoIiwibWluIiwiaSIsInB1c2giLCJ1cGRhdGVWaWV3IiwiYWN0aXZlQnV0dG9uSW5kZXgiLCJyZW5kZXJQYWdpbmF0aW9uIiwiYWRkTGlzdGVuZXJzIiwidXBkYXRlVmlzaWJsZVBhZ2VzIiwib2Zmc2V0IiwiYnV0dG9uc0NvdW50IiwiYnV0dG9ucyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImluZGV4T2YiLCJtYXgiLCJsIiwidGV4dENvbnRlbnQiLCJkYXRhc2V0IiwicGFnZSIsInVwZGF0ZVN0YXR1cyIsIm9wdGlvbnMiLCJ0YXJnZXRQYWdlIiwiYWN0aXZlQnV0dG9uIiwicGFnaW5hdGlvbkJ1dHRvbnNMaXN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJidXR0b25QcmV2IiwiYnV0dG9uTmV4dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicGFyc2VJbnQiLCJ0YXJnZXQiLCJyZW5kZXJUZW1wbGF0ZSIsInNvdXJjZSIsInRlbXBsYXRlSWQiLCJ0ZW1wbGF0ZSIsImNvbXBpbGUiLCJjb250ZXh0IiwidGFyZ2V0SWQiLCJodG1sIiwiaW5uZXJIVE1MIiwicmVuZGVyT2ZmZXJzTGlzdCIsInJlbmRlck9mZmVyc0Vycm9yIiwiYnV0dG9uc05leHRQcmV2IiwidGVtcGxhdGVBcnJheSIsImFwcGx5IiwibWFwIiwiTnVtYmVyIiwicHJvdG90eXBlIiwidmFsdWVPZiIsImNsYXNzTGlzdCIsInJlbW92ZSIsIm1hcmtBY3RpdmVCdXR0b24iLCJzaG93SGlkZU5hdkJ1dHRvbnMiLCJlcnJvciIsInJlbmZlck9mZmVyc0Vycm9yIiwiYnV0dG9uSW5kZXgiLCJjbGFzc0FjdGl2ZSIsImJ1dHRvbnNBY3RpdmUiLCJsZW5ndGgiLCJhZGQiLCJjbGFzc0luYWN0aXZlIiwiYnV0dG9uc05leFByZXZJbmFjdGl2ZSIsImJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJtYWluTWVudSIsImNvbGxhcHNlQ2xhc3MiLCJhbmltYXRpb25FeHBhbmQiLCJhbmltYXRpb25Db2xsYXBzZSIsImFuaW1hdGlvbkRlbGF5IiwiY29udGFpbnMiLCJ0b2dnbGUiLCJzZXRUaW1lb3V0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBRUFBLFlBQUFDLGVBQUEsUUFBQSxTQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUEsR0FBQUMsT0FBQUgsRUFBQSxHQUNBSSxFQUFBRixFQUFBRyxLQUFBSixFQUVBLE9BQUFHLEtBR0FOLFdBQUFDLGVBQUEsV0FBQSxTQUFBTyxFQUFBQyxHQUNBLE1BQUFELEdBQUFDLElBSUFULFdBQUFDLGVBQUEsbUJBQUEsU0FBQVMsR0FDQSxHQUFBQyxHQUFBLEVBRUEsU0FBQSxHQUNBLElBQUEsSUFBQUQsRUFDQUMsRUFBQSxTQUNBLE1BQ0EsS0FBQUQsR0FBQSxHQUFBLEdBQUFBLEVBQ0FDLEVBQUEsZUFDQSxNQUNBLEtBQUFELEdBQUEsR0FBQSxJQUFBQSxFQUNBQyxFQUFBLFlBQ0EsTUFDQSxLQUFBRCxHQUFBLEdBQUEsS0FB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QyxPQUFBM0MsRUFBQWQsRUFBQUEsSUFDQXdELEVBQUF4RCxHQUFBZ0QsVUFBQUMsT0FBQU0sRUFHQTlDLEdBQUE2QyxHQUFBTixVQUFBVSxJQUFBSCxJQUVBSixtQkFBQSxTQUFBaEMsR0FDQSxHQUFBc0IsR0FBQS9CLFNBQUFDLHVCQUFBLDJCQUNBZ0QsRUFBQSxvQ0FDQUMsRUFBQWxELFNBQUFDLHVCQUFBZ0QsRUFFQSxJQUFBeEMsRUFBQXRDLFdBQUEsR0FBQXNDLEVBQUF0QyxXQUFBc0MsRUFBQTlCLFdBQ0EsSUFBQSxHQUFBVyxHQUFBLEVBQUFjLEVBQUE4QyxFQUFBSCxPQUFBM0MsRUFBQWQsRUFBQUEsSUFDQTRELEVBQUE1RCxHQUFBZ0QsVUFBQUMsT0FBQVUsT0FFQSxLQUFBeEMsRUFBQXRDLFdBQ0E0RCxFQUFBLEdBQUFPLFVBQUFVLElBQUFDLEdBRUFsQixFQUFBLEdBQUFPLFVBQUFVLElBQUFDLEtBS0FqRixFQUFBZ0IsVUNqTUEsV0FDQSxHQUFBbUUsR0FBQW5ELFNBQUFvRCxjQUFBLHFCQUNBQyxFQUFBckQsU0FBQW9ELGNBQUEsY0FDQUUsRUFBQSx1QkFDQUMsRUFBQSxtQkFDQUMsbUJBQUEscUJBQ0FDLGVBQUEsSUFFQU4sRUFBQW5DLGlCQUFBLFFBQUEsV0FDQXFDLEVBQUFmLFVBQUFvQixTQUFBSixJQUNBRCxFQUFBZixVQUFBcUIsT0FBQUwsR0FDQUQsRUFBQWYsVUFBQXFCLE9BQUFKLEtBRUFGLEVBQUFmLFVBQUFxQixPQUFBSixHQUNBRixFQUFBZixVQUFBcUIsT0FBQUgsbUJBQ0FJLFdBQUEsV0FDQVAsRUFBQWYsVUFBQXFCLE9BQUFMLEdBQ0FELEVBQUFmLFVBQUFxQixPQUFBSCxvQkFDQUMsaUJBRUFOLEVBQUFiLFVBQUFxQixPQUFBLFdBQ0FSLEVBQUFiLFVBQUFxQixPQUFBIiwiZmlsZSI6InN1YnBhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3RpbWVzJywgZnVuY3Rpb24gKG51bWJlciwgZWxlbWVudCkge1xuICAgICAgICB2YXIgYXJyID0gbmV3IEFycmF5KG51bWJlciArIDEpLFxuICAgICAgICByZXN1bHQgPSBhcnIuam9pbihlbGVtZW50KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaW5jcmVhc2UnLCBmdW5jdGlvbiAodmFsdWUsIHN0ZXApIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICsgc3RlcDtcbiAgICB9KTtcblxuXG4gICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignc2NvcmVEZXNjcmlwdGlvbicsIGZ1bmN0aW9uIChzY29yZSkge1xuICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSAnJztcblxuICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICAgIGNhc2UgKHNjb3JlIDw9IDMpOlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gJ0ZhdGFsbnknO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAoc2NvcmUgPiAzICYmIHNjb3JlIDw9IDUpOlxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gJ05pZSBuYWpsZXBzenknO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAoc2NvcmUgPiA1ICYmIHNjb3JlIDwgNi40KTpcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9ICdQcnplY2nEmXRueSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIChzY29yZSA+IDUgJiYgc2NvcmUgPD0gNi41KTpcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9ICdQcnplY2nEmXRueSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIChzY29yZSA+IDYuNSAmJiBzY29yZSA8PSA4KTpcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9ICdCYXJkem8gZG9icnknO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAoc2NvcmUgPiA4ICYmIHNjb3JlIDwgOSk6XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAnWm5ha29taXR5JztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAnV3liaXRueSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVzY3JpcHRpb24gKyAnICcgKyBzY29yZTtcbiAgICB9KTtcblxuICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lzRXF1YWwnLCBmdW5jdGlvbiAocHJpY2VSZWd1bGFyLCBwcmljZVByb21vKSB7XG4gICAgICAgIHJldHVybiBwcmljZVJlZ3VsYXIgPT09IHByaWNlUHJvbW87XG4gICAgfSk7XG59KSgpO1xuXG4iLCIoZnVuY3Rpb24gKCkge1xuJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBvZmZlcnNEYXRhLCBvZmZlcnNWaWV3LCBvZmZlcnNTdGF0ZTtcblxuICAgIG9mZmVyc0RhdGEgPSB7XG4gICAgICAgIGJhc2VVcmw6ICcvL2NhbXAuZWZpZ2VuY2UuY29tL2NhbXAvYXBpL3BsYWNlcz9wYWdlPScsXG4gICAgICAgIGdldERhdGE6IGZ1bmN0aW9uIChwYWdlTnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gJC5hamF4KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGNyb3NzRG9tYWluOiB0cnVlLFxuICAgICAgICAgICAgICAgIHVybDogdGhhdC5iYXNlVXJsICsgcGFnZU51bWJlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgb2ZmZXJzU3RhdGUgPSB7XG4gICAgICAgIHRvdGFsUGFnZXM6IG51bGwsXG4gICAgICAgIGN1cnJlbnRQYWdlOiAxLFxuICAgICAgICBtYXhOdW1iZXJPZkJ1dHRvbnM6IDEwLFxuICAgICAgICBudW1iZXJPZlZpc2libGVCdXR0b25zOiBudWxsLFxuICAgICAgICB2aXNpYmxlUGFnZXM6IFtdLFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIG9mZmVyc0RhdGEuZ2V0RGF0YSgpXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC50b3RhbFBhZ2VzID0gZGF0YS50b3RhbF9wYWdlcztcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5udW1iZXJPZlZpc2libGVCdXR0b25zID0gTWF0aC5taW4odGhhdC50b3RhbFBhZ2VzLCB0aGF0Lm1heE51bWJlck9mQnV0dG9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0Lm51bWJlck9mVmlzaWJsZUJ1dHRvbnM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC52aXNpYmxlUGFnZXMucHVzaChpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBvZmZlcnNWaWV3LnVwZGF0ZVZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZU51bWJlcjogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUJ1dHRvbkluZGV4OiAwXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBvZmZlcnNWaWV3LnJlbmRlclBhZ2luYXRpb24odGhhdC5udW1iZXJPZlZpc2libGVCdXR0b25zKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hZGRMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlVmlzaWJsZVBhZ2VzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uc0NvdW50ID0gdGhpcy5udW1iZXJPZlZpc2libGVCdXR0b25zLFxuICAgICAgICAgICAgYnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BhZ2luYXRpb25fX2J1dHRvbicpLFxuICAgICAgICAgICAgb2Zmc2V0O1xuXG4gICAgICAgICAgICBpZiAodGhpcy52aXNpYmxlUGFnZXMuaW5kZXhPZih0aGlzLmN1cnJlbnRQYWdlKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy52aXNpYmxlUGFnZXNbMF0gPiB0aGlzLmN1cnJlbnRQYWdlKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gTWF0aC5tYXgoLXRoaXMuY3VycmVudFBhZ2UsIC1idXR0b25zQ291bnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBNYXRoLm1pbihidXR0b25zQ291bnQsIHRoaXMudG90YWxQYWdlcyAtIHRoaXMuY3VycmVudFBhZ2UgKyAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBidXR0b25zQ291bnQ7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVQYWdlc1tpXSA9IHRoaXMudmlzaWJsZVBhZ2VzW2ldICsgb2Zmc2V0O1xuICAgICAgICAgICAgICAgIGJ1dHRvbnNbaV0udGV4dENvbnRlbnQgPSB0aGlzLnZpc2libGVQYWdlc1tpXTtcbiAgICAgICAgICAgICAgICBidXR0b25zW2ldLmRhdGFzZXQucGFnZSA9IHRoaXMudmlzaWJsZVBhZ2VzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGVTdGF0dXM6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0UGFnZSwgYWN0aXZlQnV0dG9uO1xuXG4gICAgICAgICAgICBpZiAoKG9wdGlvbnMucGFnZSAmJiBvcHRpb25zLm9mZnNldCkgfHwgKCFvcHRpb25zLnBhZ2UgJiYgIW9wdGlvbnMub2Zmc2V0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhcmdldFBhZ2UgPSBvcHRpb25zLnBhZ2UgfHwgdGhpcy5jdXJyZW50UGFnZSArIG9wdGlvbnMub2Zmc2V0O1xuICAgICAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAodGFyZ2V0UGFnZSA9PT0gdGhpcy5jdXJyZW50UGFnZSk6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBjYXNlICh0YXJnZXRQYWdlID4gdGhpcy50b3RhbFBhZ2VzKTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGNhc2UgKHRhcmdldFBhZ2UgPCAxKTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB0YXJnZXRQYWdlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVQYWdlcygpO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVCdXR0b24gPSB0aGlzLnZpc2libGVQYWdlcy5pbmRleE9mKHRhcmdldFBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBvZmZlcnNWaWV3LnVwZGF0ZVZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZU51bWJlcjogdGFyZ2V0UGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUJ1dHRvbkluZGV4OiBhY3RpdmVCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFBhZ2VzOiB0aGlzLnRvdGFsUGFnZXNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhZGRMaXN0ZW5lcnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWdpbmF0aW9uQnV0dG9uc0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnaW5hdGlvbl9fYnV0dG9ucy1saXN0JyksXG4gICAgICAgICAgICBidXR0b25QcmV2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYnV0dG9ucy1uZXh0LXByZXZfX3dyYXAnKVswXSxcbiAgICAgICAgICAgIGJ1dHRvbk5leHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdidXR0b25zLW5leHQtcHJldl9fd3JhcCcpWzFdLFxuICAgICAgICAgICAgdGhhdCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHBhZ2luYXRpb25CdXR0b25zTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdGhhdC51cGRhdGVTdGF0dXMoe1xuICAgICAgICAgICAgICAgICAgICBwYWdlOiBwYXJzZUludChlLnRhcmdldC5kYXRhc2V0LnBhZ2UpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJ1dHRvblByZXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHRoYXQudXBkYXRlU3RhdHVzKHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAtMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBidXR0b25OZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnVwZGF0ZVN0YXR1cyh7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgb2ZmZXJzVmlldyA9IHtcbiAgICAgICAgcmVuZGVyVGVtcGxhdGU6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy50ZW1wbGF0ZUlkKS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShzb3VyY2UpLFxuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBvcHRpb25zLmRhdGEsXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy50YXJnZXRJZCksXG4gICAgICAgICAgICAgICAgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuXG4gICAgICAgICAgICB0YXJnZXQuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyT2ZmZXJzTGlzdDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlSWQ6ICdvZmZlcnMtdGVtcGxhdGUnLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgdGFyZ2V0SWQ6ICdvZmZlcnMnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyT2ZmZXJzRXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUlkOiAnb2ZmZXJzLXRlbXBsYXRlLS1lcnJvcicsXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICB0YXJnZXRJZDogJ29mZmVycydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXJQYWdpbmF0aW9uOiBmdW5jdGlvbiAoYnV0dG9uc0NvdW50KSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uc05leHRQcmV2LCB0ZW1wbGF0ZUFycmF5O1xuXG4gICAgICAgICAgICBidXR0b25zTmV4dFByZXYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdidXR0b25zLW5leHQtcHJldl9fd3JhcCcpO1xuICAgICAgICAgICAgdGVtcGxhdGVBcnJheSA9IEFycmF5LmFwcGx5KG51bGwsIG5ldyBBcnJheShidXR0b25zQ291bnQpKS5tYXAoTnVtYmVyLnByb3RvdHlwZS52YWx1ZU9mLCAwKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBidXR0b25zTmV4dFByZXZbaV0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlSWQ6ICdwYWdpbmF0aW9uLWJ1dHRvbicsXG4gICAgICAgICAgICAgICAgZGF0YToge2J1dHRvbnNDb3VudDogdGVtcGxhdGVBcnJheX0sXG4gICAgICAgICAgICAgICAgdGFyZ2V0SWQ6ICdwYWdpbmF0aW9uX19idXR0b25zLWxpc3QnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlVmlldzogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIG9mZmVyc0RhdGEuZ2V0RGF0YShvcHRpb25zLnBhZ2VOdW1iZXIpXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5yZW5kZXJPZmZlcnNMaXN0KGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcmtBY3RpdmVCdXR0b24ob3B0aW9ucy5hY3RpdmVCdXR0b25JbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2hvd0hpZGVOYXZCdXR0b25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucmVuZmVyT2ZmZXJzRXJyb3IoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1hcmtBY3RpdmVCdXR0b246IGZ1bmN0aW9uIChidXR0b25JbmRleCkge1xuICAgICAgICAgICAgdmFyIGNsYXNzQWN0aXZlID0gJ3BhZ2luYXRpb25fX2J1dHRvbi0tYWN0aXZlJyxcbiAgICAgICAgICAgIGJ1dHRvbnNBY3RpdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzQWN0aXZlKSxcbiAgICAgICAgICAgIGJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYWdpbmF0aW9uX19idXR0b24nKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBidXR0b25zQWN0aXZlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIGJ1dHRvbnNBY3RpdmVbaV0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc0FjdGl2ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbnNbYnV0dG9uSW5kZXhdLmNsYXNzTGlzdC5hZGQoY2xhc3NBY3RpdmUpO1xuICAgICAgICB9LFxuICAgICAgICBzaG93SGlkZU5hdkJ1dHRvbnM6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uc05leHRQcmV2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYnV0dG9ucy1uZXh0LXByZXZfX3dyYXAnKSxcbiAgICAgICAgICAgIGNsYXNzSW5hY3RpdmUgPSAnYnV0dG9ucy1uZXh0LXByZXZfX3dyYXAtLWluYWN0aXZlJyxcbiAgICAgICAgICAgIGJ1dHRvbnNOZXhQcmV2SW5hY3RpdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzSW5hY3RpdmUpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wYWdlTnVtYmVyID4gMSAmJiBvcHRpb25zLnBhZ2VOdW1iZXIgPCBvcHRpb25zLnRvdGFsUGFnZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGJ1dHRvbnNOZXhQcmV2SW5hY3RpdmUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNOZXhQcmV2SW5hY3RpdmVbaV0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc0luYWN0aXZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucGFnZU51bWJlciA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbnNOZXh0UHJldlswXS5jbGFzc0xpc3QuYWRkKGNsYXNzSW5hY3RpdmUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidXR0b25zTmV4dFByZXZbMV0uY2xhc3NMaXN0LmFkZChjbGFzc0luYWN0aXZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbm9mZmVyc1N0YXRlLmluaXQoKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgIHZhciBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFtYnVyZ2VyLWJ1dHRvbicpLFxuICAgIG1haW5NZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tbWVudScpLFxuICAgIGNvbGxhcHNlQ2xhc3MgPSAnbWFpbi1tZW51LS1jb2xsYXBzZWQnLFxuICAgIGFuaW1hdGlvbkV4cGFuZCA9ICdhbmltYXRlZC0tc2NhbGVJbic7XG4gICAgYW5pbWF0aW9uQ29sbGFwc2UgPSAnYW5pbWF0ZWQtLXNjYWxlT3V0JyxcbiAgICBhbmltYXRpb25EZWxheSA9IDMwMDtcblxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG1haW5NZW51LmNsYXNzTGlzdC5jb250YWlucyhjb2xsYXBzZUNsYXNzKSkge1xuICAgICAgICAgICAgbWFpbk1lbnUuY2xhc3NMaXN0LnRvZ2dsZShjb2xsYXBzZUNsYXNzKTtcbiAgICAgICAgICAgIG1haW5NZW51LmNsYXNzTGlzdC50b2dnbGUoYW5pbWF0aW9uRXhwYW5kKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1haW5NZW51LmNsYXNzTGlzdC50b2dnbGUoYW5pbWF0aW9uRXhwYW5kKTtcbiAgICAgICAgICAgIG1haW5NZW51LmNsYXNzTGlzdC50b2dnbGUoYW5pbWF0aW9uQ29sbGFwc2UpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbWFpbk1lbnUuY2xhc3NMaXN0LnRvZ2dsZShjb2xsYXBzZUNsYXNzKTtcbiAgICAgICAgICAgICAgICBtYWluTWVudS5jbGFzc0xpc3QudG9nZ2xlKGFuaW1hdGlvbkNvbGxhcHNlKTtcbiAgICAgICAgICAgIH0sIGFuaW1hdGlvbkRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnZmEtYmFycycpO1xuICAgICAgICBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnZmEtdGltZXMnKTtcbiAgICB9KVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==